<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java Picocli Quick Start | 上校的玩具间</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="坐而言不如起而行。js,java,vue,Spring,html5,Node,git,github,CodeQL等技术文章。">
    
    <link rel="preload" href="/assets/css/0.styles.55d26f3f.css" as="style"><link rel="preload" href="/assets/js/app.cc096181.js" as="script"><link rel="preload" href="/assets/js/2.5dee0ed7.js" as="script"><link rel="preload" href="/assets/js/59.17316a40.js" as="script"><link rel="prefetch" href="/assets/js/10.c62e6ba0.js"><link rel="prefetch" href="/assets/js/11.a2442b49.js"><link rel="prefetch" href="/assets/js/12.08da015b.js"><link rel="prefetch" href="/assets/js/13.c990750d.js"><link rel="prefetch" href="/assets/js/14.caf4037b.js"><link rel="prefetch" href="/assets/js/15.052ffcdb.js"><link rel="prefetch" href="/assets/js/16.601483d2.js"><link rel="prefetch" href="/assets/js/17.78753bd0.js"><link rel="prefetch" href="/assets/js/18.8265a3db.js"><link rel="prefetch" href="/assets/js/19.c71deec5.js"><link rel="prefetch" href="/assets/js/20.3dc6ddb8.js"><link rel="prefetch" href="/assets/js/21.18547e0f.js"><link rel="prefetch" href="/assets/js/22.a3431622.js"><link rel="prefetch" href="/assets/js/23.91fc9bba.js"><link rel="prefetch" href="/assets/js/24.e18e54c5.js"><link rel="prefetch" href="/assets/js/25.776bb8aa.js"><link rel="prefetch" href="/assets/js/26.89a4c751.js"><link rel="prefetch" href="/assets/js/27.833d6eeb.js"><link rel="prefetch" href="/assets/js/28.7705d981.js"><link rel="prefetch" href="/assets/js/29.a043ebe1.js"><link rel="prefetch" href="/assets/js/3.949795aa.js"><link rel="prefetch" href="/assets/js/30.68a4dd93.js"><link rel="prefetch" href="/assets/js/31.0e5c8b84.js"><link rel="prefetch" href="/assets/js/32.fac4fa2c.js"><link rel="prefetch" href="/assets/js/33.8427560a.js"><link rel="prefetch" href="/assets/js/34.fc07cf5a.js"><link rel="prefetch" href="/assets/js/35.79ddcc93.js"><link rel="prefetch" href="/assets/js/36.e9e31113.js"><link rel="prefetch" href="/assets/js/37.7376d7c9.js"><link rel="prefetch" href="/assets/js/38.67d4abcf.js"><link rel="prefetch" href="/assets/js/39.287d22c4.js"><link rel="prefetch" href="/assets/js/4.362b37b2.js"><link rel="prefetch" href="/assets/js/40.5144274a.js"><link rel="prefetch" href="/assets/js/41.a055f9e8.js"><link rel="prefetch" href="/assets/js/42.1a857a3b.js"><link rel="prefetch" href="/assets/js/43.4c4532d1.js"><link rel="prefetch" href="/assets/js/44.9768cf32.js"><link rel="prefetch" href="/assets/js/45.31810108.js"><link rel="prefetch" href="/assets/js/46.d5c9957a.js"><link rel="prefetch" href="/assets/js/47.8503638e.js"><link rel="prefetch" href="/assets/js/48.89c8fe11.js"><link rel="prefetch" href="/assets/js/49.8e42420e.js"><link rel="prefetch" href="/assets/js/5.9a721ad4.js"><link rel="prefetch" href="/assets/js/50.2c59a9d3.js"><link rel="prefetch" href="/assets/js/51.4e8c6245.js"><link rel="prefetch" href="/assets/js/52.4bdda958.js"><link rel="prefetch" href="/assets/js/53.f4d3ebb7.js"><link rel="prefetch" href="/assets/js/54.8c9ef8ef.js"><link rel="prefetch" href="/assets/js/55.55e9ad2d.js"><link rel="prefetch" href="/assets/js/56.f3bb01b2.js"><link rel="prefetch" href="/assets/js/57.974fc40b.js"><link rel="prefetch" href="/assets/js/58.cceff5ff.js"><link rel="prefetch" href="/assets/js/6.ec7467fe.js"><link rel="prefetch" href="/assets/js/60.d52cb7bf.js"><link rel="prefetch" href="/assets/js/61.4f998d76.js"><link rel="prefetch" href="/assets/js/62.4090d670.js"><link rel="prefetch" href="/assets/js/63.ae02f421.js"><link rel="prefetch" href="/assets/js/64.67620b73.js"><link rel="prefetch" href="/assets/js/65.a7664222.js"><link rel="prefetch" href="/assets/js/66.68203f8e.js"><link rel="prefetch" href="/assets/js/67.24a623b2.js"><link rel="prefetch" href="/assets/js/68.0eb87a07.js"><link rel="prefetch" href="/assets/js/69.cc0a2061.js"><link rel="prefetch" href="/assets/js/7.79257635.js"><link rel="prefetch" href="/assets/js/70.99ed2497.js"><link rel="prefetch" href="/assets/js/71.a0cb4c42.js"><link rel="prefetch" href="/assets/js/8.d2115d3f.js"><link rel="prefetch" href="/assets/js/9.67223949.js">
    <link rel="stylesheet" href="/assets/css/0.styles.55d26f3f.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://wiki-1251603812.cos.ap-shanghai.myqcloud.com/images/logo.png" alt="上校的玩具间" class="logo"> <span class="site-name can-hide">上校的玩具间</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/dev/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/web/" class="nav-link">前端目录</a></li><li class="dropdown-subitem"><a href="/dev/web/basis/htmlandcss/" class="nav-link">HTML/CSS基础</a></li></ul></li><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/java/" class="nav-link">Java后端</a></li><li class="dropdown-subitem"><a href="/dev/java/core/spring5/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/dev/java/core/mybatis/" class="nav-link">Mybatis</a></li><li class="dropdown-subitem"><a href="/dev/java/core/springmvc/" class="nav-link">SpringMVC</a></li><li class="dropdown-subitem"><a href="/dev/java/core/springbootbase/" class="nav-link">Springboot基础篇</a></li><li class="dropdown-subitem"><a href="/dev/java/eco/docker/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><!----> <a href="/dev/basic/" class="nav-link">计算机基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="安全" class="dropdown-title"><a href="/sec/" class="link-title router-link-active">安全</a> <span class="title" style="display:none;">安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sec/sa/" class="nav-link">静态分析</a></li><li class="dropdown-item"><!----> <a href="/sec/vuln/" class="nav-link">漏洞原理</a></li><li class="dropdown-item"><!----> <a href="/sec/dev/" class="nav-link">安全开发</a></li></ul></div></div><div class="nav-item"><a href="/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">站点导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">关于</a></li><li class="dropdown-item"><!----> <a href="/more/blog/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><a href="https://travellings.link/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Travelling
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://wiki-1251603812.cos.ap-shanghai.myqcloud.com/images/avatar.jpg"> <div class="blogger-info"><h3>p0jo</h3> <span>欲变世界，先变自己。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/dev/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/web/" class="nav-link">前端目录</a></li><li class="dropdown-subitem"><a href="/dev/web/basis/htmlandcss/" class="nav-link">HTML/CSS基础</a></li></ul></li><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/java/" class="nav-link">Java后端</a></li><li class="dropdown-subitem"><a href="/dev/java/core/spring5/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/dev/java/core/mybatis/" class="nav-link">Mybatis</a></li><li class="dropdown-subitem"><a href="/dev/java/core/springmvc/" class="nav-link">SpringMVC</a></li><li class="dropdown-subitem"><a href="/dev/java/core/springbootbase/" class="nav-link">Springboot基础篇</a></li><li class="dropdown-subitem"><a href="/dev/java/eco/docker/" class="nav-link">Docker</a></li></ul></li><li class="dropdown-item"><!----> <a href="/dev/basic/" class="nav-link">计算机基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="安全" class="dropdown-title"><a href="/sec/" class="link-title router-link-active">安全</a> <span class="title" style="display:none;">安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sec/sa/" class="nav-link">静态分析</a></li><li class="dropdown-item"><!----> <a href="/sec/vuln/" class="nav-link">漏洞原理</a></li><li class="dropdown-item"><!----> <a href="/sec/dev/" class="nav-link">安全开发</a></li></ul></div></div><div class="nav-item"><a href="/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">站点导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li><li class="dropdown-item"><!----> <a href="/about/" class="nav-link">关于</a></li><li class="dropdown-item"><!----> <a href="/more/blog/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><a href="https://travellings.link/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Travelling
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>静态分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>漏洞原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安全开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>奇淫巧技</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>小工具</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sec/skill/jar2app/" class="sidebar-link">Jar打包为APP</a></li><li><a href="/sec/skill/picocli-quick-start/" aria-current="page" class="active sidebar-link">Java Picocli Quick Start</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#入门案例" class="sidebar-link">入门案例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#asciiart-源码解读" class="sidebar-link">ASCIIArt 源码解读</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#运行程序" class="sidebar-link">运行程序</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#子命令案例" class="sidebar-link">子命令案例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#源码解读" class="sidebar-link">源码解读</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#执行和改写以上的代码" class="sidebar-link">执行和改写以上的代码</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#选项和参数" class="sidebar-link">选项和参数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#选项注解" class="sidebar-link">选项注解</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#参数注解" class="sidebar-link">参数注解</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#强类型转换" class="sidebar-link">强类型转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#类型转换" class="sidebar-link">类型转换</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#集合和字典" class="sidebar-link">集合和字典</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#必选参数" class="sidebar-link">必选参数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#必选选项" class="sidebar-link">必选选项</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#必选参数-2" class="sidebar-link">必选参数</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#多值" class="sidebar-link">多值</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#重复选项" class="sidebar-link">重复选项</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#正则拆分" class="sidebar-link">正则拆分</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#arity" class="sidebar-link">arity</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#help选项" class="sidebar-link">Help选项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#自定义help选项" class="sidebar-link">自定义help选项</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#version-help" class="sidebar-link">Version Help</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#静态版本信息" class="sidebar-link">静态版本信息</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#动态版本信息" class="sidebar-link">动态版本信息</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#usage-help" class="sidebar-link">Usage Help</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#使用信息示例" class="sidebar-link">使用信息示例</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#使用帮助消息元素" class="sidebar-link">使用帮助消息元素</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#ansi颜色和风格" class="sidebar-link">ANSI颜色和风格</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#彩色示例" class="sidebar-link">彩色示例</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#样式和颜色的使用帮助" class="sidebar-link">样式和颜色的使用帮助</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#更多颜色" class="sidebar-link">更多颜色</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#支持的平台" class="sidebar-link">支持的平台</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#强制开启或关闭ansi" class="sidebar-link">强制开启或关闭ANSI</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#子命令" class="sidebar-link">子命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#注册子命令" class="sidebar-link">注册子命令</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#解析子命令" class="sidebar-link">解析子命令</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#parentcommand注解" class="sidebar-link">@ParentCommand注解</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#子命令的使用帮助" class="sidebar-link">子命令的使用帮助</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#重复使用" class="sidebar-link">重复使用</a></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#执行命令" class="sidebar-link">执行命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#退出代码" class="sidebar-link">退出代码</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#生成退出代码" class="sidebar-link">生成退出代码</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#例外退出代码" class="sidebar-link">例外退出代码</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#执行配置" class="sidebar-link">执行配置</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#处理错误" class="sidebar-link">处理错误</a></li><li class="sidebar-sub-header level3"><a href="/sec/skill/picocli-quick-start/#迁移" class="sidebar-link">迁移</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#追踪" class="sidebar-link">追踪</a></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#自动补全" class="sidebar-link">自动补全</a></li><li class="sidebar-sub-header level2"><a href="/sec/skill/picocli-quick-start/#更多" class="sidebar-link">更多</a></li></ul></li></ul></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/sec/#安全" data-v-06225672>安全</a></li><li data-v-06225672><a href="/sec/#奇淫巧技" data-v-06225672>奇淫巧技</a></li><li data-v-06225672><a href="/sec/#小工具" data-v-06225672>小工具</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://wiki.pwddd.com" target="_blank" title="作者" class="beLink" data-v-06225672>p0jo</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-04-26</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Java Picocli Quick Start<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="picocli"><a href="#picocli" class="header-anchor">#</a> picocli</h1> <blockquote><p>最近突发奇想尝试用Java写一写安全小工具。不过万事开头难，如何在命令行上打印帮助文档竟然一直困扰着我。当然，这个实现起来其实不难，但是写起来混乱且不美观。</p> <p>刚开始的时候，为了打印出彩色的字符，我尝试使用<code>\033[</code>这种转义字符，并写了一个工具类，用于生成指定格式和颜色的打印字符串。其实，针对于命令行早有其他的解决方案，且使用起来比较顺手和规范（我差点想自己写一个——何必重复造轮子呢），诸如Apache Commons CLI等。在尝试使用Commons CLI时，我发现它确实好用，但是似乎满足不了彩色打印的需求。于是我开始寻找其他的解决方案，最终发现了picocli。</p></blockquote> <p>快速入门文档地址：https://picocli.info/quick-guide.html</p> <p>完整文档地址：https://picocli.info</p> <p>Github地址：https://github.com/remkop/picocli</p> <h2 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h2> <blockquote><p>Picocli使用接近零代码的方式在一个文件中完成Java CLI程序的创建，Picocli的目标是创建一个可以在JVM运行或者脱离JVM的请打命令行应用。</p></blockquote> <p>Picocli支持诸如：POSIX、GNU、MS-DOS等多种命令行语法样式，并且可以ANSI颜色和样式生成高度定制化的帮助信息。基于Picocli创建的命令行程序支持任何层级下的命令参数提示和补全。基于picocli的应用程序可以提前编译为GRaalVM本机映像，启动时间极快，内存要求更低，可以作为单个可执行文件分发。Picocli还可以为您的应用程序生成精美的文档，格式包括HTML、PDF和Unix手册页。</p> <p>使用帮助的例子：</p> <p><img src="https://wiki-1251603812.cos.ap-shanghai.myqcloud.com/images/ExampleUsageANSI.png" alt="Screenshot of usage help with Ansi codes enabled"></p> <blockquote><p>本文使用picocli的注解API。对于无法使用注解的应用程序，还有一个编程API，用于定义预期的选项和位置参数，并处理解析结果。本快速指南不涵盖编程API。</p></blockquote> <h2 id="入门案例"><a href="#入门案例" class="header-anchor">#</a> 入门案例</h2> <p>下面以一个小型但功能齐全的基于picocli的命令行应用程序<code>ASCIIArt</code>作为示例代码。</p> <p><code>ASCIIArt</code>将一个或多个参数转换为ASCII字符画，并将其打印出来。使用方法如下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ java -cp <span class="token string">&quot;myapp.jar;picocli-4.6.3.jar&quot;</span> ASCIIArt --font-size<span class="token operator">=</span><span class="token number">9</span> Hello picocli
       <span class="token comment">#   #       #  #                 #                  #  #</span>
       <span class="token comment">#   #       #  #                                    #</span>
       <span class="token comment">#   #  ***  #  #  ****     #***  #  **#  ****  **#  #  #</span>
       <span class="token comment">#####  ***  #  #  ****     #***  #  **   ****  **   #  #</span>
       <span class="token comment">#   #  *#*  #  #  *  *     #  *  #  *    *  *  *    #  #</span>
       <span class="token comment">#   #  **   #  #  ****     #***  #  **   ****  **   #  #</span>
       <span class="token comment">#   #  **#  #  #  ****     #***  #  **#  ****  **#  #  #</span>
                                  <span class="token comment">#</span>
                                  *
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>如果你想直接以以下的方式运行，可以查看<a href="https://picocli.info/#_packaging_your_application" target="_blank" rel="noopener noreferrer">应用打包<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的相关文档。</p> <div class="language-SHELL line-numbers-mode"><pre class="language-shell"><code>ASCIIArt --font-size<span class="token operator">=</span><span class="token number">9</span> Hello picocli
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="asciiart-源码解读"><a href="#asciiart-源码解读" class="header-anchor">#</a> ASCIIArt 源码解读</h3> <p>ASCIIArt的代码缩短如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * ASCII Art: Basic Picocli based sample application
 * Explanation: &lt;a href=&quot;https://picocli.info/quick-guide.html#_basic_example_asciiart&quot;&gt;Picocli quick guide&lt;/a&gt;
 * Source Code: &lt;a href=&quot;https://github.com/remkop/picocli/blob/master/picocli-examples/src/main/java/picocli/examples/i18n/I18NDemo.java&quot;&gt;GitHub&lt;/a&gt; 
 * @author Andreas Deininger
 */</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Command</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Option</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Parameters</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token class-name">Font</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token class-name">Graphics</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token class-name">Graphics2D</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span></span><span class="token class-name">RenderingHints</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>image<span class="token punctuation">.</span></span><span class="token class-name">BufferedImage</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;ASCIIArt&quot;</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token string">&quot;ASCIIArt 1.0&quot;</span><span class="token punctuation">,</span> mixinStandardHelpOptions <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// |1|</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ASCIIArt</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span> <span class="token comment">// |2|</span>

    <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;-s&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--font-size&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;Font size&quot;</span><span class="token punctuation">)</span> <span class="token comment">// |3|</span>
    <span class="token keyword">int</span> fontSize <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>paramLabel <span class="token operator">=</span> <span class="token string">&quot;&lt;word&gt;&quot;</span><span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token string">&quot;Hello, picocli&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// |4|</span>
               description <span class="token operator">=</span> <span class="token string">&quot;Words to be translated into ASCII art.&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> words <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;Hello,&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;picocli&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// |5|</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// |6|</span>
        <span class="token comment">// https://stackoverflow.com/questions/7098972/ascii-art-java</span>
        <span class="token class-name">BufferedImage</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">(</span><span class="token number">144</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">.</span>TYPE_INT_RGB<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Graphics</span> graphics <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">getGraphics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        graphics<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span><span class="token string">&quot;Dialog&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">.</span>PLAIN<span class="token punctuation">,</span> fontSize<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Graphics2D</span> graphics2D <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Graphics2D</span><span class="token punctuation">)</span> graphics<span class="token punctuation">;</span>
        graphics2D<span class="token punctuation">.</span><span class="token function">setRenderingHint</span><span class="token punctuation">(</span><span class="token class-name">RenderingHints</span><span class="token punctuation">.</span>KEY_TEXT_ANTIALIASING<span class="token punctuation">,</span>
                <span class="token class-name">RenderingHints</span><span class="token punctuation">.</span>VALUE_TEXT_ANTIALIAS_ON<span class="token punctuation">)</span><span class="token punctuation">;</span>
        graphics2D<span class="token punctuation">.</span><span class="token function">drawString</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> words<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">StringBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> <span class="token number">144</span><span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span>
                builder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span><span class="token function">getRGB</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">16777216</span> <span class="token operator">?</span> <span class="token string">&quot; &quot;</span> <span class="token operator">:</span> image<span class="token punctuation">.</span><span class="token function">getRGB</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&quot;#&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> exitCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ASCIIArt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// |7|</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>exitCode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// |8|</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>我们可以把上面的代码拆分来看：</p> <ol><li>创建一个类继承<code>Runable</code>或者<code>Callable</code>。</li> <li>使用<code>@Command</code>注解标注这个类，并设置一个名字；<code>mixinStandardHelpOptions</code>选项用于生成一个帮助和版本文档（使用参数<code>--help</code>和<code>--version</code>）。</li> <li>给每一个命令选项对应的成员变量添加一个<code>@Option</code>注解，如上所示，你可以定义一个选项的名称和注释。当然，还有一些其他的选项。</li> <li>给每一个可能的参数添加一个<code>@Parameters</code>注解，Picocli将把命令行参数转换为强类型值，并将这些值注入被注解的字段。</li> <li>在类的<code>run</code>或<code>call</code>方法中定义您的业务逻辑。解析成功完成后调用此方法。</li> <li>在类的<code>main</code>方法中，使用<code>CommandLine.execute</code>方法引导应用程序。这将解析命令行，处理错误，处理使用请求和版本帮助，并调用业务逻辑。</li> <li><code>CommandLine.execute</code>方法返回一个退出代码。您的应用程序可以使用此退出代码调用<code>System.exit</code>，以表示调用过程的成功或失败。</li></ol> <p><strong>这是几乎任何picocli应用的基本框架。</strong></p> <blockquote><p>有关更多使用帮助，请参阅<a href="http://picocli.info/" target="_blank" rel="noopener noreferrer">参考手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，例如给方法添加一个注解。</p></blockquote> <p>像任何专业的命令行应用程序一样，<code>ASCIIArt</code>有<code>--help</code>和<code>--version</code>选项。<code>--Help</code>选项向用户展示了如何使用应用程序。Picocli会自动生成此使用帮助消息：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ ASCIIArt --help
Usage: ASCIIArt <span class="token punctuation">[</span>-hV<span class="token punctuation">]</span> <span class="token punctuation">[</span>-s<span class="token operator">=</span><span class="token operator">&lt;</span>fontsize<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>word<span class="token operator">&gt;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
      <span class="token punctuation">[</span><span class="token operator">&lt;</span>word<span class="token operator">&gt;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>             Words to be translated into ASCII art.
  -s, --font-size<span class="token operator">=</span><span class="token operator">&lt;</span>fontSize<span class="token operator">&gt;</span>  Font size
  -h, --help                  Show this <span class="token builtin class-name">help</span> message and exit.
  -V, --version               Print version information and exit.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="运行程序"><a href="#运行程序" class="header-anchor">#</a> 运行程序</h3> <p>添加picocli依赖。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>info.picocli<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>picocli<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.6.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>设置运行参数为<code>-h</code>并运行。</p> <p><img src="https://wiki-1251603812.cos.ap-shanghai.myqcloud.com/images/image-20220425224756576.png" alt="image-20220425224756576"></p> <h2 id="子命令案例"><a href="#子命令案例" class="header-anchor">#</a> 子命令案例</h2> <p>下面我们展示了另一个小型但功能齐全的基于picocli的命令行应用程序示例，该应用程序解释了子命令的使用：<code>ISOCodeResolver</code>。</p> <p>该应用程序有两个子命令，语言和国家，根据ISO标准解析语言或国家代码（国家代码为ISO-3166-1，语言代码为ISO-639-1/639-2）。该应用程序可以按以下方式使用：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ java -cp <span class="token string">&quot;myapp.jar;picocli-4.6.3.jar&quot;</span> ISOCodeResolver language de cs en sd se
de: German
cs: Czech
en: English
sd: Sindhi
se: Northern Sami
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>或者：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ java -cp <span class="token string">&quot;myapp.jar;picocli-4.6.3.jar&quot;</span> ISOCodeResolver country cn fr th ro no
CN: China
FR: France
TH: Thailand
RO: Romania
NO: Norway
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="源码解读"><a href="#源码解读" class="header-anchor">#</a> 源码解读</h3> <p>源代码如下所示：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
 * ISO code resolver: Picocli based sample application (with subcommands)
 * Explanation: &lt;a href=&quot;https://picocli.info/quick-guide.html#_subcommands_example_iso_code_resolver&quot;&gt;Picocli quick guide&lt;/a&gt;
 * Source Code: &lt;a href=&quot;https://github.com/remkop/picocli/blob/master/picocli-examples/src/main/java/picocli/examples/subcommands/SubcommandDemo.java&quot;&gt;GitHub&lt;/a&gt; 
 * @author Andreas Deininger
 */</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Command</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Model</span><span class="token punctuation">.</span><span class="token class-name">CommandSpec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Parameters</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">ParameterException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Spec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Locale</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;ISOCodeResolver&quot;</span><span class="token punctuation">,</span> subcommands <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token class-name">SubcommandAsClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">CommandLine<span class="token punctuation">.</span>HelpCommand</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// |2|</span>
         description <span class="token operator">=</span> <span class="token string">&quot;Resolve ISO country codes (ISO-3166-1) or language codes (ISO 639-1 or -2)&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ISOCodeResolver</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span> <span class="token comment">// |1|</span>
  <span class="token annotation punctuation">@Spec</span> <span class="token class-name">CommandSpec</span> spec<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;Resolve ISO country code (ISO-3166-1, Alpha-2 code)&quot;</span><span class="token punctuation">)</span> <span class="token comment">// |3|</span>
  <span class="token keyword">void</span> <span class="token function">subCommandViaMethod</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>arity <span class="token operator">=</span> <span class="token string">&quot;1..*&quot;</span><span class="token punctuation">,</span> paramLabel <span class="token operator">=</span> <span class="token string">&quot;&lt;country code&gt;&quot;</span><span class="token punctuation">,</span>
                                       description <span class="token operator">=</span> <span class="token string">&quot;country code(s) to be resolved&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> countryCodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> code <span class="token operator">:</span> countryCodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s: %s&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayCountry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ParameterException</span><span class="token punctuation">(</span>spec<span class="token punctuation">.</span><span class="token function">commandLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Specify a subcommand&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> exitCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ISOCodeResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// |5|</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>exitCode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// |6|</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;language&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;Resolve ISO language code (ISO 639-1 or -2, two/three letters)&quot;</span><span class="token punctuation">)</span> <span class="token comment">// |4|</span>
<span class="token keyword">class</span> <span class="token class-name">SubcommandAsClass</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>arity <span class="token operator">=</span> <span class="token string">&quot;1..*&quot;</span><span class="token punctuation">,</span> paramLabel <span class="token operator">=</span> <span class="token string">&quot;&lt;language code&gt;&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;language code(s) to be resolved&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> languageCodes<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> code <span class="token operator">:</span> languageCodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s: %s&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><ol><li>当顶级命令没有实现<code>Runnable</code>或<code>Callable</code>时，用户必须指定一个子命令（子命令成为必填项）。这是可选的：如果父命令可以在应用程序中无需子命令的情况下自行执行，只需实现Runnable或Callable即可。</li> <li>使用<code>@Command</code>标注这个类，同时需要注意的是我们使用<code>CommandLine.HelpCommand.class</code>作为子类，生成<code>help</code>子命令。</li> <li>可以通过两种方式将自定义子命令添加到顶级命令中。最简单的方法是向类中的方法添加<code>@Command</code>注解。对于子命令的每个选项和位置参数，添加一个方法参数，并使用<code>@Option</code>或<code>@Parameters</code>注释对这些方法参数进行注释。在上面的示例中，一旦用户调用子命令<code>contary</code>，关联方法<code>subCommandViaMethod</code>就会被调用。</li> <li>在较大的应用程序中，通常为每个子命令创建一个单独的<code>@Command</code>注释的类。在上面的示例中，<code>SubcommandAsClass</code>类表示<code>language</code>子命令。一旦用户调用此子命令，将调用该类的重写的<code>run</code>方法。要注册子命令，请在<strong>父命令</strong>的<code>@Command</code>注释的子命令属性中指定子命令类（<code>subcommands = { SubcommandAsClass.class, ... }</code>）。</li> <li>在类的<code>main</code>方法中，使用<code>CommandLine.execute</code>方法引导应用程序。这将解析命令行，处理错误，处理使用请求和版本帮助，并调用业务逻辑。</li> <li><code>CommandLine.execute</code>方法返回一个退出代码。您的应用程序可以使用此退出代码调用<code>System.exit</code>，以表示调用过程的成功或失败。</li></ol> <blockquote><p>有关子命令的更多详细信息和方面，请参阅<a href="https://picocli.info/#_subcommands/" target="_blank" rel="noopener noreferrer">参考手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的子命令一章。</p></blockquote> <p>除了两个用户定义的子命令外，<code>ISOCodeResolver</code>应用程序还提供了一个帮助子命令，该子命令将使用帮助消息打印到控制台。Picocli会自动生成此使用帮助消息：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ ISOCodeResolver <span class="token builtin class-name">help</span>
Usage: ISOCodeResolver <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span>
Resolves ISO country codes <span class="token punctuation">(</span>ISO-3166-1<span class="token punctuation">)</span> or language codes <span class="token punctuation">(</span>ISO-639-1/-2<span class="token punctuation">)</span>
Commands:
  <span class="token builtin class-name">help</span>      Displays <span class="token builtin class-name">help</span> information about the specified <span class="token builtin class-name">command</span>
  country   Resolves ISO country codes <span class="token punctuation">(</span>ISO-3166-1<span class="token punctuation">)</span>
  language  Resolves one or <span class="token function">more</span> ISO language codes <span class="token punctuation">(</span>ISO-639-1 or <span class="token number">639</span>-2<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="执行和改写以上的代码"><a href="#执行和改写以上的代码" class="header-anchor">#</a> 执行和改写以上的代码</h3> <p>完全使用方法实现，改写如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>pwddd<span class="token punctuation">.</span>picocli</span><span class="token punctuation">;</span><span class="token comment">/*
 * ISO code resolver: Picocli based sample application (with subcommands)
 * Explanation: &lt;a href=&quot;https://picocli.info/quick-guide.html#_subcommands_example_iso_code_resolver&quot;&gt;Picocli quick guide&lt;/a&gt;
 * Source Code: &lt;a href=&quot;https://github.com/remkop/picocli/blob/master/picocli-examples/src/main/java/picocli/examples/subcommands/SubcommandDemo.java&quot;&gt;GitHub&lt;/a&gt;
 * @author Andreas Deininger
 */</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Command</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Model</span><span class="token punctuation">.</span><span class="token class-name">CommandSpec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Parameters</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">ParameterException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Spec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Locale</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;ISOCodeResolver&quot;</span><span class="token punctuation">,</span> subcommands <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token class-name">CommandLine<span class="token punctuation">.</span>HelpCommand</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// |2|</span>
         description <span class="token operator">=</span> <span class="token string">&quot;Resolve ISO country codes (ISO-3166-1) or language codes (ISO 639-1 or -2)&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ISOCodeResolver</span>  <span class="token punctuation">{</span> <span class="token comment">// |1|</span>
  <span class="token annotation punctuation">@Spec</span> <span class="token class-name">CommandSpec</span> spec<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;Resolve ISO country code (ISO-3166-1, Alpha-2 code)&quot;</span><span class="token punctuation">)</span> <span class="token comment">// |3|</span>
  <span class="token keyword">void</span> <span class="token function">subCommandViaMethod</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>arity <span class="token operator">=</span> <span class="token string">&quot;1..*&quot;</span><span class="token punctuation">,</span> paramLabel <span class="token operator">=</span> <span class="token string">&quot;&lt;country code&gt;&quot;</span><span class="token punctuation">,</span>
                                       description <span class="token operator">=</span> <span class="token string">&quot;country code(s) to be resolved&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> countryCodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> code <span class="token operator">:</span> countryCodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s: %s&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayCountry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;language&quot;</span><span class="token punctuation">,</span>description <span class="token operator">=</span> <span class="token string">&quot;Resolve ISO language code (ISO 639-1 or -2, two/three letters)&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">void</span> <span class="token function">subCommandViaMethodLanguage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>arity <span class="token operator">=</span> <span class="token string">&quot;1..*&quot;</span><span class="token punctuation">,</span>
          paramLabel <span class="token operator">=</span> <span class="token string">&quot;&lt;language code&gt;&quot;</span><span class="token punctuation">,</span>
          description <span class="token operator">=</span> <span class="token string">&quot;language code(s) to be resolved&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> languageCodes<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> code <span class="token operator">:</span> languageCodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s: %s&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> exitCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ISOCodeResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// |5|</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>exitCode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// |6|</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>完全使用类实现，改写如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>pwddd<span class="token punctuation">.</span>picocli</span><span class="token punctuation">;</span><span class="token comment">/*
 * ISO code resolver: Picocli based sample application (with subcommands)
 * Explanation: &lt;a href=&quot;https://picocli.info/quick-guide.html#_subcommands_example_iso_code_resolver&quot;&gt;Picocli quick guide&lt;/a&gt;
 * Source Code: &lt;a href=&quot;https://github.com/remkop/picocli/blob/master/picocli-examples/src/main/java/picocli/examples/subcommands/SubcommandDemo.java&quot;&gt;GitHub&lt;/a&gt;
 * @author Andreas Deininger
 */</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Command</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Model</span><span class="token punctuation">.</span><span class="token class-name">CommandSpec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Parameters</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">ParameterException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Spec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Locale</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;ISOCodeResolver&quot;</span><span class="token punctuation">,</span> subcommands <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token class-name">CommandLine<span class="token punctuation">.</span>HelpCommand</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">LanguageCommand</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">CountryCommand</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// |2|</span>
         description <span class="token operator">=</span> <span class="token string">&quot;Resolve ISO country codes (ISO-3166-1) or language codes (ISO 639-1 or -2)&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ISOCodeResolver</span>  <span class="token punctuation">{</span> <span class="token comment">// |1|</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> exitCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ISOCodeResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// |5|</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>exitCode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// |6|</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;language&quot;</span><span class="token punctuation">,</span>description <span class="token operator">=</span> <span class="token string">&quot;Resolve ISO language code (ISO 639-1 or -2, two/three letters)&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">LanguageCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>arity <span class="token operator">=</span> <span class="token string">&quot;1..*&quot;</span><span class="token punctuation">,</span> paramLabel <span class="token operator">=</span> <span class="token string">&quot;&lt;language code&gt;&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;language code(s) to be resolved&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> languageCodes<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> code <span class="token operator">:</span> languageCodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s: %s&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;country&quot;</span><span class="token punctuation">,</span>description <span class="token operator">=</span> <span class="token string">&quot;Resolve ISO country code (ISO-3166-1, Alpha-2 code)&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">CountryCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>arity <span class="token operator">=</span> <span class="token string">&quot;1..*&quot;</span><span class="token punctuation">,</span> paramLabel <span class="token operator">=</span> <span class="token string">&quot;&lt;country code&gt;&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;country code(s) to be resolved&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> countryCodes<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> code <span class="token operator">:</span> countryCodes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s: %s&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDisplayCountry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h2 id="选项和参数"><a href="#选项和参数" class="header-anchor">#</a> 选项和参数</h2> <p>命令行参数可以分为选项和位置参数。选项有一个名称，位置参数通常是选项后面的值，但它们可能是混合的。</p> <p><img src="https://wiki-1251603812.cos.ap-shanghai.myqcloud.com/images/OptionsAndParameters2.png" alt="Example command with annotated @Option and @Parameters"></p> <p>Picocli对选项和位置参数有单独的注解。</p> <h3 id="选项注解"><a href="#选项注解" class="header-anchor">#</a> 选项注解</h3> <h4 id="普通选项"><a href="#普通选项" class="header-anchor">#</a> 普通选项</h4> <p>选项必须有一个或多个名称。选项名称通常以<code>-</code>或<code>--</code>开头，但picocli允许您使用您想要的任何选项名称。</p> <p>下面的示例显示了具有一个或多个名称的选项、使用选项参数的选项和帮助选项。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">Tar</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-c&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;create a new archive&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">boolean</span> create<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--file&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> paramLabel <span class="token operator">=</span> <span class="token string">&quot;ARCHIVE&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;the archive file&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">File</span> archive<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>paramLabel <span class="token operator">=</span> <span class="token string">&quot;FILE&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;one or more files to archive&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> files<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;-h&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--help&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> usageHelp <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;display a help message&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token keyword">boolean</span> helpRequested<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Picocli匹配选项名称来设置字段值。</p> <p>Picocli支持POSIX集群短选项：一个或多个没有选项参数的单个字符选项，其次是最多一个带有选项参数的选项，可以分组在一个“-”破折号后面。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;-c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--file&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;result.tar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;file1.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;file2.txt&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Tar</span> tar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span>tar<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseArgs</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">assert</span> <span class="token operator">!</span>tar<span class="token punctuation">.</span>helpRequested<span class="token punctuation">;</span>
<span class="token keyword">assert</span>  tar<span class="token punctuation">.</span>create<span class="token punctuation">;</span>
<span class="token keyword">assert</span>  tar<span class="token punctuation">.</span>archive<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;result.tar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">assert</span>  <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>tar<span class="token punctuation">.</span>files<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;file1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;file2.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>例如，对于上面的Tar示例，以下命令行调用是等价的：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">tar</span> -c -f result.tar f1.txt f2.txt
<span class="token function">tar</span> -cf result.tar f1.txt f2.txt
<span class="token function">tar</span> -cfresult.tar f1.txt f2.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="交互式密码选项"><a href="#交互式密码选项" class="header-anchor">#</a> 交互式密码选项</h4> <p>对于标记为交互式的选项和位置参数，系统会提示用户在控制台上输入值。在Java 6或更高版本上运行时，picocli将使用Console.readPassword API，以便用户输入不会响应到控制台。</p> <h3 id="参数注解"><a href="#参数注解" class="header-anchor">#</a> 参数注解</h3> <p>任何不是子命令、选项或选项参数的命令行参数都会被解释为位置参数。使用（基于零的）索引属性来准确指定要捕获的参数。省略索引属性意味着字段捕获所有位置参数。数组或集合字段可以捕获多个值。索引属性接受范围值，因此像<code>@Parameters（index = &quot;2.4&quot;)</code>这样的注释捕获索引2、3和4的参数。范围值可以是开放式的。例如，<code>@Parameters（index = &quot;3..*&quot;)</code>捕获索引3及以上的所有参数。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">PositionalDemo</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span>    <span class="token class-name">InetAddress</span> host<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>    <span class="token keyword">int</span> port<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token string">&quot;2..*&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">File</span><span class="token punctuation">&gt;</span></span> files<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Picocli使用参数数组中指定索引处的值初始化字段。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;12345&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;file1.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;file2.txt&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">PositionalDemo</span> params <span class="token operator">=</span> <span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token function">populateCommand</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PositionalDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">assert</span> params<span class="token punctuation">.</span>host<span class="token punctuation">.</span><span class="token function">getHostName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">assert</span> params<span class="token punctuation">.</span>port <span class="token operator">==</span> <span class="token number">12345</span><span class="token punctuation">;</span>
<span class="token keyword">assert</span> params<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;file1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;file2.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>用户手册有更多关于选项和位置参数的详细信息，以及<code>--</code>选项结束分隔符和参数文件（@-files）。</p> <h2 id="强类型转换"><a href="#强类型转换" class="header-anchor">#</a> 强类型转换</h2> <p>当命令行选项和位置参数映射到注解的字段时，文本值将转换为注解的字段的类型。</p> <h3 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h3> <p>开箱即用，picocli可以将命令行参数字符串转换为许多常见数据类型。有关内置类型的完整列表，请参阅<a href="http://picocli.info/#_built_in_types" target="_blank" rel="noopener noreferrer">用户手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，但一般来说，所有原始类型及其对象等价物，任何枚举以及文件、日期、URL、BigDecimal、正则表达式模式等常见类都可以按原样使用。在Java 7上运行的应用程序可以使用Path，在Java 8上可以使用新的java.time类。</p> <p><strong>您还可以使用<a href="http://picocli.info/#_custom_type_converters" target="_blank" rel="noopener noreferrer">自定义类型转换器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来处理上述内置数据类型以外的数据类型。</strong></p> <h3 id="集合和字典"><a href="#集合和字典" class="header-anchor">#</a> 集合和字典</h3> <p>如果选项或位置参数可以具有多个值，则字段类型必须是数组、集合或映射。可以使用List、Set或Queue等任何集合子类。</p> <p>一个常见的要求是具有类似于Java系统属性的键值对的选项，例如<code>-Dkey=value</code>。要实现这一点，您只需使用Map字段即可。</p> <p>只要为键和值类型都注册了<a href="https://picocli.info/quick-guide.html#_strongly_typed_everything" target="_blank" rel="noopener noreferrer">类型转换器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，映射字段的键和值可能具有任何类型。键和值类型从Map的通用类型参数中推断出来。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">MapDemo</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;-u&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--timeUnit&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span>TimeUnit</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> timeout<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>以下命令行将生成Map中的四个键值条目：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> -uDAYS<span class="token operator">=</span><span class="token number">3</span> -u <span class="token assign-left variable">HOURS</span><span class="token operator">=</span><span class="token number">23</span> -u<span class="token operator">=</span>MINUTES<span class="token operator">=</span><span class="token number">59</span> --timeUnit<span class="token operator">=</span><span class="token environment constant">SECONDS</span><span class="token operator">=</span><span class="token number">13</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="必选参数"><a href="#必选参数" class="header-anchor">#</a> 必选参数</h2> <h3 id="必选选项"><a href="#必选选项" class="header-anchor">#</a> 必选选项</h3> <p>可以标记所需的选项，使用户必须在命令行上指定它们。当未指定所需的选项时，将从解析方法中抛出MissingParameterException。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-n&quot;</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;mandatory number&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> number<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="必选参数-2"><a href="#必选参数-2" class="header-anchor">#</a> 必选参数</h3> <p>使用<code>arity</code>让<code>@Parameter</code>参数强制使用：</p> <div class="language-JAVA line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>arity <span class="token operator">=</span> <span class="token string">&quot;1..*&quot;</span><span class="token punctuation">,</span> descriptions <span class="token operator">=</span> <span class="token string">&quot;at least one File&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">File</span><span class="token punctuation">&gt;</span></span> files<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="多值"><a href="#多值" class="header-anchor">#</a> 多值</h2> <h3 id="重复选项"><a href="#重复选项" class="header-anchor">#</a> 重复选项</h3> <p>创建多值选项的最简单方法是声明一个带注释的字段，其类型是数组、集合或映射。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-option&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用如下的命令：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token operator">&lt;</span>command<span class="token operator">&gt;</span> -option <span class="token number">111</span> -option <span class="token number">222</span> -option <span class="token number">333</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>每一个元素都会被添加到数组中。</p> <h3 id="正则拆分"><a href="#正则拆分" class="header-anchor">#</a> 正则拆分</h3> <p>选项和参数还可以指定一个拆分正则表达式，用于将每个选项参数拆分为较小的子字符串。每个子字符串都转换为集合或数组的类型。请参阅<a href="https://picocli.info/quick-guide.html#_collections_and_maps" target="_blank" rel="noopener noreferrer">集合和字典<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-option&quot;</span><span class="token punctuation">,</span> split <span class="token operator">=</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以使用如下方式传递参数：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>-option <span class="token number">111,222</span>,333
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="arity"><a href="#arity" class="header-anchor">#</a> arity</h3> <p>有时，您想定义一个选项，该选项需要为命令行上的每个选项出现多个选项参数。Arity属性允许您准确控制每次选项发生要消耗多少参数。</p> <p>Arity属性可以指定所需参数的确切数量，或具有最小和最大参数数量的范围。最大值可以是精确的上限，也可以是“*”来表示任意数量的参数。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">ArityDemo</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>arity <span class="token operator">=</span> <span class="token string">&quot;1..3&quot;</span><span class="token punctuation">,</span> descriptions <span class="token operator">=</span> <span class="token string">&quot;one to three Files&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> files<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> arity <span class="token operator">=</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;exactly two floating point numbers&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span> doubles<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-s&quot;</span><span class="token punctuation">,</span> arity <span class="token operator">=</span> <span class="token string">&quot;1..*&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;at least one string&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>当命令行上指定的参数少于最小值时，会抛出<code>MissingParameterException</code>。</p> <p>如果没有指定arity，参数的数量取决于字段的类型。用户手册有更多关于<a href="http://picocli.info/#_default_arity" target="_blank" rel="noopener noreferrer">arity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的详细信息。</p> <h2 id="help选项"><a href="#help选项" class="header-anchor">#</a> Help选项</h2> <p>当<code>mixinStandardHelpOptions</code>命令属性设置为<code>true</code>时，picocli会在命令中添加<code>mixin</code>，该命令将 <code>usageHelp</code>和<code>versionHelp</code>选项添加到命令中。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>mixinStandardHelpOptions <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token string">&quot;auto help demo - picocli 3.0&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">AutoHelpDemo</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;--option&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;Some option.&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> option<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>上述示例的使用帮助消息如下所示：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Usage: <span class="token operator">&lt;</span>main class<span class="token operator">&gt;</span> <span class="token punctuation">[</span>-hV<span class="token punctuation">]</span> <span class="token punctuation">[</span>--option<span class="token operator">=</span><span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token punctuation">]</span>
      --option<span class="token operator">=</span><span class="token operator">&lt;</span>option<span class="token operator">&gt;</span>   Some option.
  -h, --help              Show this <span class="token builtin class-name">help</span> message and exit.
  -V, --version           Print version information and <span class="token builtin class-name">exit</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="自定义help选项"><a href="#自定义help选项" class="header-anchor">#</a> 自定义help选项</h3> <p>应用程序可以通过设置属性<code>versionHelp = true</code>、 <code>usageHelp = true</code>或<code>help = true</code>来定义自定义帮助选项。如果命令行上指定的参数之一是“帮助”选项，当缺少所必须的选项时，picocli不会抛出<code>MissingParameterException</code>。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;-V&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--version&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> versionHelp <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;display version info&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">boolean</span> versionInfoRequested<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;?&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-h&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--help&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> usageHelp <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;display this help message&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">boolean</span> usageHelpRequested<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>将这些属性用于请求在控制台上显示使用帮助消息或版本信息的选项。</p> <p>CommandLine类提供了两种方法，允许外部组件检测是否请求了使用帮助或版本信息（无需检查带注释的域对象）：</p> <ul><li><code>CommandLine.isUsageHelpRequested()</code>如果解析器匹配了用使用<code>Help=true</code>注释的选项，则返回true</li> <li>如果解析器匹配带有<code>versionHelp=true</code>注释的选项，<code>CommandLine.isVersionHelpRequested()</code>返回true</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">CommandLine</span> commandLine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
commandLine<span class="token punctuation">.</span><span class="token function">parseArgs</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>commandLine<span class="token punctuation">.</span><span class="token function">isUsageHelpRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   commandLine<span class="token punctuation">.</span><span class="token function">usage</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>commandLine<span class="token punctuation">.</span><span class="token function">isVersionHelpRequested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   commandLine<span class="token punctuation">.</span><span class="token function">printVersionHelp</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ... run App's business logic</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>另请参阅用户手册的“<a href="http://picocli.info/#_printing_help_automatically" target="_blank" rel="noopener noreferrer">自动打印帮助<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>”一章。</p> <h2 id="version-help"><a href="#version-help" class="header-anchor">#</a> Version Help</h2> <h3 id="静态版本信息"><a href="#静态版本信息" class="header-anchor">#</a> 静态版本信息</h3> <p>应用程序可以在<code>@Command</code>注释的版本属性中指定版本信息。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>version <span class="token operator">=</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">VersionedCommand</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>CommandLine.printVersionHelp（PrintStream）</code>方法从此注释中提取版本信息，并将其打印到指定的<code>PrintStream</code>。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">CommandLine</span> commandLine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VersionedCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//...</span>
commandLine<span class="token punctuation">.</span><span class="token function">printVersionHelp</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>该版本可以指定多个字符串，并可能包含标记以显示ANSI样式和颜色。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>version <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;@|yellow Versioned Command 1.0|@&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;@|blue Build 12345|@&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;@|red,bg(white) (c) 2017|@&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">VersionedCommand</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://wiki-1251603812.cos.ap-shanghai.myqcloud.com/images/VersionInfoWithColors.png" alt="Screenshot of version information containing markup with Ansi styles and colors"></p> <h3 id="动态版本信息"><a href="#动态版本信息" class="header-anchor">#</a> 动态版本信息</h3> <p><code>@Command</code>注释支持<code>versionProvider</code>属性。应用程序可以在此属性中指定<code>IVersionProvider</code>实现，picocli将实例化该类并调用它来收集版本信息。</p> <p>GitHub项目有一个<a href="https://github.com/remkop/picocli/blob/master/picocli-examples/src/main/java/picocli/examples/VersionProviderDemo2.java" target="_blank" rel="noopener noreferrer">示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>实现，可以从清单文件中获取版本，另一个<a href="https://github.com/remkop/picocli/blob/master/picocli-examples/src/main/java/picocli/examples/VersionProviderDemo1.java" target="_blank" rel="noopener noreferrer">示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>从构建生成的版本属性文件中获取版本信息。</p> <h2 id="usage-help"><a href="#usage-help" class="header-anchor">#</a> Usage Help</h2> <h3 id="使用信息示例"><a href="#使用信息示例" class="header-anchor">#</a> 使用信息示例</h3> <p>Picocli使您的应用程序可以轻松生成这样的使用帮助消息：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Usage: <span class="token function">cat</span> <span class="token punctuation">[</span>-AbeEnstTuv<span class="token punctuation">]</span> <span class="token punctuation">[</span>--help<span class="token punctuation">]</span> <span class="token punctuation">[</span>--version<span class="token punctuation">]</span> <span class="token punctuation">[</span>FILE<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
Concatenate FILE<span class="token punctuation">(</span>s<span class="token punctuation">)</span>, or standard input, to standard output.
      FILE                 Files whose contents to display
  -A, --show-all           equivalent to -vET
  -b, --number-nonblank    number nonempty output lines, overrides -n
  -e                       equivalent to -vET
  -E, --show-ends          display $ at end of each line
  -n, --number             number all output lines
  -s, --squeeze-blank      suppress repeated empty output lines
  -t                       equivalent to -vT
  -T, --show-tabs          display TAB characters as ^I
  -u                       <span class="token punctuation">(</span>ignored<span class="token punctuation">)</span>
  -v, --show-nonprinting   use ^ and M- notation, except <span class="token keyword">for</span> LDF and TAB
      --help               display this <span class="token builtin class-name">help</span> and <span class="token builtin class-name">exit</span>
      --version            output version information and <span class="token builtin class-name">exit</span>
Copyright<span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2019</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>使用帮助消息由注解属性生成，如下所示：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;cat&quot;</span><span class="token punctuation">,</span> footer <span class="token operator">=</span> <span class="token string">&quot;Copyright(c) 2019&quot;</span><span class="token punctuation">,</span>
         description <span class="token operator">=</span> <span class="token string">&quot;Concatenate FILE(s), or standard input, to standard output.&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>paramLabel <span class="token operator">=</span> <span class="token string">&quot;FILE&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;Files whose contents to display&quot;</span><span class="token punctuation">)</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">File</span><span class="token punctuation">&gt;</span></span> files<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;--help&quot;</span><span class="token punctuation">,</span> usageHelp <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;display this help and exit&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">boolean</span> help<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-t&quot;</span><span class="token punctuation">,</span>                 description <span class="token operator">=</span> <span class="token string">&quot;equivalent to -vT&quot;</span><span class="token punctuation">)</span>  <span class="token keyword">boolean</span> t<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-e&quot;</span><span class="token punctuation">,</span>                 description <span class="token operator">=</span> <span class="token string">&quot;equivalent to -vET&quot;</span><span class="token punctuation">)</span> <span class="token keyword">boolean</span> e<span class="token punctuation">;</span>
  <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;-A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;--show-all&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;equivalent to -vET&quot;</span><span class="token punctuation">)</span> <span class="token keyword">boolean</span> all<span class="token punctuation">;</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="使用帮助消息元素"><a href="#使用帮助消息元素" class="header-anchor">#</a> 使用帮助消息元素</h3> <p>使用帮助消息的各种元素很容易用注解自定义。</p> <h4 id="命令名称"><a href="#命令名称" class="header-anchor">#</a> 命令名称</h4> <p>在上面的示例中，程序名称取自命令注释的名称属性：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>没有名称属性，picocli将在概要中显示一个通用的<code>&lt;main class&gt;</code>：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Usage: <span class="token operator">&lt;</span>main class<span class="token operator">&gt;</span> <span class="token punctuation">[</span>-AbeEnstTuv<span class="token punctuation">]</span> <span class="token punctuation">[</span>--help<span class="token punctuation">]</span> <span class="token punctuation">[</span>--version<span class="token punctuation">]</span> <span class="token punctuation">[</span>FILE<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="参数标签"><a href="#参数标签" class="header-anchor">#</a> 参数标签</h4> <p>非布尔选项需要一个值。使用帮助应该解释这一点，picocli在概要和选项列表中显示选项参数。默认情况下，字段名显示在<code>&lt;和&gt;</code>括号中。使用<code>paramLabel</code>属性显示不同的名称。例如：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Usage: <span class="token operator">&lt;</span>main class<span class="token operator">&gt;</span> <span class="token punctuation">[</span>-f<span class="token operator">=</span>FILE<span class="token punctuation">]</span> <span class="token punctuation">[</span>-n<span class="token operator">=</span><span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">]</span> NUM <span class="token operator">&lt;</span>host<span class="token operator">&gt;</span>
      NUM        number param
      <span class="token function">host</span>       the <span class="token function">host</span>
  -f<span class="token operator">=</span> FILE       a <span class="token function">file</span>
  -n<span class="token operator">=</span> <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span>   number option
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>以下示例类中的一些注释字段具有paramLabel属性，而另一些则没有：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">ParamLabels</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span>    description <span class="token operator">=</span> <span class="token string">&quot;a file&quot;</span><span class="token punctuation">,</span>       paramLabel <span class="token operator">=</span> <span class="token string">&quot;FILE&quot;</span><span class="token punctuation">)</span> <span class="token class-name">File</span> f<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-n&quot;</span><span class="token punctuation">,</span>    description <span class="token operator">=</span> <span class="token string">&quot;number option&quot;</span><span class="token punctuation">)</span>                     <span class="token keyword">int</span> number<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;number param&quot;</span><span class="token punctuation">,</span> paramLabel <span class="token operator">=</span> <span class="token string">&quot;NUM&quot;</span><span class="token punctuation">)</span>  <span class="token keyword">int</span> n<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Parameters</span><span class="token punctuation">(</span>index <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;the host&quot;</span><span class="token punctuation">)</span>                          <span class="token class-name">InetAddress</span> host<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="排序的选项列表"><a href="#排序的选项列表" class="header-anchor">#</a> 排序的选项列表</h4> <p>默认情况下，选项列表按字母顺序显示选项。使用<code>sortOptions = false</code>属性按照您类中声明的顺序显示选项。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>sortOptions <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="缩写简述"><a href="#缩写简述" class="header-anchor">#</a> 缩写简述</h4> <p>如果命令非常复杂并且有很多选项，有时最好使用缩写<code>Synopsis</code>属性抑制概要中的细节。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>abbreviateSynopsis <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这显示了下面的概要。位置参数不缩写。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Usage: <span class="token operator">&lt;</span>main class<span class="token operator">&gt;</span> <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>files<span class="token operator">&gt;</span><span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="自定义概要"><a href="#自定义概要" class="header-anchor">#</a> 自定义概要</h4> <p>为了更好地控制概要，请使用<code>customSynopsis</code>属性指定一个或多个概要行。例如：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Usage: <span class="token function">ln</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token punctuation">[</span>-T<span class="token punctuation">]</span> TARGET LINK_NAME   <span class="token punctuation">(</span>1st form<span class="token punctuation">)</span>
  or:  <span class="token function">ln</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. TARGET                  <span class="token punctuation">(</span>2nd form<span class="token punctuation">)</span>
  or:  <span class="token function">ln</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. TARGET<span class="token punctuation">..</span>. DIRECTORY     <span class="token punctuation">(</span>3rd form<span class="token punctuation">)</span>
  or:  <span class="token function">ln</span> <span class="token punctuation">[</span>OPTION<span class="token punctuation">]</span><span class="token punctuation">..</span>. -t DIRECTORY TARGET<span class="token punctuation">..</span>.  <span class="token punctuation">(</span>4th form<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>要生成上述概要，请在<code>customSynopsis</code>属性中指定文字文本：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>synopsisHeading <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> customSynopsis <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;Usage: ln [OPTION]... [-T] TARGET LINK_NAME   (1st form)&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;  or:  ln [OPTION]... TARGET                  (2nd form)&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;  or:  ln [OPTION]... TARGET... DIRECTORY     (3rd form)&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;  or:  ln [OPTION]... -t DIRECTORY TARGET...  (4th form)&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Ln</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="头部和底部"><a href="#头部和底部" class="header-anchor">#</a> 头部和底部</h4> <p>标题将显示在使用帮助消息的顶部（大纲之前）。如果您的命令有子命令，第一个标题行也是子命令列表中显示的行（请参阅子命令的使用帮助）。</p> <p>使用页脚属性指定一行或多行，以显示在生成的使用帮助消息下方。属性字符串数组的每个元素都显示在单独的行上。</p> <p><code>headerHeading</code>和<code>footerHeading</code>可能包含格式说明符。请参阅部分标题。</p> <h4 id="章节标题"><a href="#章节标题" class="header-anchor">#</a> 章节标题</h4> <p>部分标题可用于使使用消息布局看起来更宽敞。章节标题可能包含嵌入式行分隔符（%n）格式说明符：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;commit&quot;</span><span class="token punctuation">,</span>
        sortOptions <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        headerHeading <span class="token operator">=</span> <span class="token string">&quot;Usage:%n%n&quot;</span><span class="token punctuation">,</span>
        synopsisHeading <span class="token operator">=</span> <span class="token string">&quot;%n&quot;</span><span class="token punctuation">,</span>
        descriptionHeading <span class="token operator">=</span> <span class="token string">&quot;%nDescription:%n%n&quot;</span><span class="token punctuation">,</span>
        parameterListHeading <span class="token operator">=</span> <span class="token string">&quot;%nParameters:%n&quot;</span><span class="token punctuation">,</span>
        optionListHeading <span class="token operator">=</span> <span class="token string">&quot;%nOptions:%n&quot;</span><span class="token punctuation">,</span>
        header <span class="token operator">=</span> <span class="token string">&quot;Record changes to the repository.&quot;</span><span class="token punctuation">,</span>
        description <span class="token operator">=</span> <span class="token string">&quot;Stores the current contents of the index in a new commit &quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;along with a log message from the user describing the changes.&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">GitCommit</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>从该类生成的帮助消息的使用情况如下所示在用户手册的<a href="https://picocli.info/#_expanded_example" target="_blank" rel="noopener noreferrer">扩展示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中。</p> <h4 id="选项参数分离器"><a href="#选项参数分离器" class="header-anchor">#</a> 选项参数分离器</h4> <p>概要中显示的选项和选项参数（默认为=）之间的分隔符和选项列表可以使用分隔符属性进行配置。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>separator <span class="token operator">=</span> <span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="隐藏选项和参数"><a href="#隐藏选项和参数" class="header-anchor">#</a> 隐藏选项和参数</h4> <p>将隐藏属性设置为true的选项和参数将不会显示在使用帮助消息中。有关详细信息，请参阅用户手册。</p> <h4 id="显示默认值"><a href="#显示默认值" class="header-anchor">#</a> 显示默认值</h4> <p>选项或位置参数的默认值可以通过在描述文本中指定变量<code>${DEFAULT-VALUE}</code>嵌入到描述中。有关详细信息，请参阅用户手册。</p> <p>同样，可以通过在描述文本中指定变量<code>${COMPLETION-CANDIDATES}</code>，将完成候选者嵌入到选项或位置参数的描述中。有关详细信息，请参阅用户手册。</p> <h4 id="必填选项标记"><a href="#必填选项标记" class="header-anchor">#</a> 必填选项标记</h4> <p>所需选项可以通过使用 <code>requiredOptionMarker</code> 属性指定的字符在选项列表中标记。有关详细信息，请参阅用户手册</p> <h4 id="显示宽度"><a href="#显示宽度" class="header-anchor">#</a> 显示宽度</h4> <p>使用帮助消息的默认宽度为80个字符。系统属性<code>picocli.usage.width</code>可用于指定自定义宽度。可以配置的最小宽度为55个字符。</p> <p>宽度也可以通过<code>CommandLine::setUsageHelpWidth</code>和<code>UsageMessageSpec::width</code>方法以编程方式设置。</p> <h2 id="ansi颜色和风格"><a href="#ansi颜色和风格" class="header-anchor">#</a> ANSI颜色和风格</h2> <h3 id="彩色示例"><a href="#彩色示例" class="header-anchor">#</a> 彩色示例</h3> <p>下面显示了与用户手册中<a href="https://picocli.info/#_expanded_example" target="_blank" rel="noopener noreferrer">扩展示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中显示的相同的使用帮助消息，并启用了ANSI转义代码。</p> <p><img src="https://wiki-1251603812.cos.ap-shanghai.myqcloud.com/images/UsageHelpWithStyle.png" alt="Screenshot of usage help with Ansi codes enabled"></p> <h3 id="样式和颜色的使用帮助"><a href="#样式和颜色的使用帮助" class="header-anchor">#</a> 样式和颜色的使用帮助</h3> <p>您可以在使用帮助消息的描述、页眉和页脚中使用颜色和样式。</p> <p>Picocli支持自定义标记符号，用于在文本中混合颜色和样式，遵循Jansi引入的约定，其中<code>@|</code>开始一个样式部分，<code>|@</code>结束它。紧接着<code>@|</code>是一个逗号分隔的颜色和样式列表，所以<code>@|STYLE1[,STYLE2]...文本|@</code>。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;Custom @|bold,underline styles|@ and @|fg(red) colors|@.&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://wiki-1251603812.cos.ap-shanghai.myqcloud.com/images/DescriptionWithColors.png" alt="Description with Ansi styles and colors"></p> <p>预定义的样式和颜色表</p> <table><thead><tr><th style="text-align:left;">Pre-defined Styles</th> <th style="text-align:left;">Pre-defined Colors</th></tr></thead> <tbody><tr><td style="text-align:left;">bold</td> <td style="text-align:left;">black</td></tr> <tr><td style="text-align:left;">faint</td> <td style="text-align:left;">red</td></tr> <tr><td style="text-align:left;">underline</td> <td style="text-align:left;">green</td></tr> <tr><td style="text-align:left;">italic</td> <td style="text-align:left;">yellow</td></tr> <tr><td style="text-align:left;">blink</td> <td style="text-align:left;">blue</td></tr> <tr><td style="text-align:left;">reverse</td> <td style="text-align:left;">magenta</td></tr> <tr><td style="text-align:left;">reset</td> <td style="text-align:left;">cyan</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">white</td></tr></tbody></table> <p>默认情况下，颜色作为前景颜色应用。您可以通过指定<code>bg（&lt;color&gt;）</code>来设置背景颜色。例如，红色背景的<code>@|bg（红色）文本|@</code>。同样，<code>fg（&lt;color&gt;）</code>显式设置前景颜色。</p> <p>下面的示例展示了如何使用此标记为使用帮助消息的标题和描述添加颜色和样式：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;commit&quot;</span><span class="token punctuation">,</span>
        sortOptions <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        headerHeading <span class="token operator">=</span> <span class="token string">&quot;@|bold,underline Usage|@:%n%n&quot;</span><span class="token punctuation">,</span>
        synopsisHeading <span class="token operator">=</span> <span class="token string">&quot;%n&quot;</span><span class="token punctuation">,</span>
        descriptionHeading <span class="token operator">=</span> <span class="token string">&quot;%n@|bold,underline Description|@:%n%n&quot;</span><span class="token punctuation">,</span>
        parameterListHeading <span class="token operator">=</span> <span class="token string">&quot;%n@|bold,underline Parameters|@:%n&quot;</span><span class="token punctuation">,</span>
        optionListHeading <span class="token operator">=</span> <span class="token string">&quot;%n@|bold,underline Options|@:%n&quot;</span><span class="token punctuation">,</span>
        header <span class="token operator">=</span> <span class="token string">&quot;Record changes to the repository.&quot;</span><span class="token punctuation">,</span>
        description <span class="token operator">=</span> <span class="token string">&quot;Stores the current contents of the index in a new commit &quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;along with a log message from the user describing the changes.&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">GitCommit</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>标记样式不能嵌套，例如：<code>@|bold this @|underline that|@|@</code>将不起作用。您可以通过组合样式来实现相同的目标，例如：<code>@|bold this|@ @|bold，underline that|@</code>将正常工作。</p></blockquote> <h3 id="更多颜色"><a href="#更多颜色" class="header-anchor">#</a> 更多颜色</h3> <p>只有八种预定义的命名颜色，但大多数终端支持256种颜色索引调色板。请参阅用户手册的“<a href="https://picocli.info/#_more_colors" target="_blank" rel="noopener noreferrer">更多颜色<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>”部分，以将这些颜色用作前景或背景颜色。</p> <p><img src="https://wiki-1251603812.cos.ap-shanghai.myqcloud.com/images/256colors.png" alt="256 color indexed palette"></p> <h4 id="固定元素配色方案"><a href="#固定元素配色方案" class="header-anchor">#</a> 固定元素配色方案</h4> <p>Picocli对选项、参数和命令使用默认配色方案。没有注释来修改此配色方案，但可以通过编程和系统属性进行更改。有关详细信息，请参阅用户手册的配色方案部分。</p> <h3 id="支持的平台"><a href="#支持的平台" class="header-anchor">#</a> 支持的平台</h3> <p>Picocli只会在支持的平台上发布ANSI转义代码。这包括大多数Unix和Linux平台。有关为Windows命令控制台添加着色支持的各种选项，请参阅用户手册的Windows部分。</p> <h3 id="强制开启或关闭ansi"><a href="#强制开启或关闭ansi" class="header-anchor">#</a> 强制开启或关闭ANSI</h3> <p>无论平台如何，您都可以强制picocli始终使用ANSI代码或永远不使用ANSI代码：</p> <ul><li><p>将系统属性<code>picocli.ansi</code>设置为<code>true</code>强制picocli使用ANSI代码；将<code>picocli.ansi</code>设置为<code>false</code>强制picocli不使用ANSI代码。对于您的命令行应用程序的用户来说，这可能是一个有用的工具。</p></li> <li><p>您可以通过在调用<code>CommandLine.usage</code>时指定<code>Ansi.ON</code>或<code>Ansi.OFF</code>，决定以编程方式强制禁用或强制启用ANSI转义代码。这覆盖了系统属性<code>picocli.ansi</code>的值。例如：</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">picocli<span class="token punctuation">.</span></span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token class-name">Help</span><span class="token punctuation">.</span><span class="token class-name">Ansi</span></span><span class="token punctuation">;</span>

<span class="token class-name">App</span> app <span class="token operator">=</span> <span class="token class-name">CommandLine</span><span class="token punctuation">.</span><span class="token function">usage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">,</span> <span class="token class-name">Ansi</span><span class="token punctuation">.</span>OFF<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="子命令"><a href="#子命令" class="header-anchor">#</a> 子命令</h2> <h3 id="注册子命令"><a href="#注册子命令" class="header-anchor">#</a> 注册子命令</h3> <p>子命令可以以编程或声明方式注册</p> <h4 id="编程方式"><a href="#编程方式" class="header-anchor">#</a> 编程方式</h4> <p>子命令可以使用<code>CommandLine.addSubcommand</code>方法注册。您传递命令和带注解的对象的名称以填充子命令选项。解析器使用指定的名称来识别命令行参数中的子命令。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">CommandLine</span> commandLine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Git</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span>   <span class="token keyword">new</span> <span class="token class-name">GitStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;commit&quot;</span><span class="token punctuation">,</span>   <span class="token keyword">new</span> <span class="token class-name">GitCommit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">,</span>      <span class="token keyword">new</span> <span class="token class-name">GitAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;branch&quot;</span><span class="token punctuation">,</span>   <span class="token keyword">new</span> <span class="token class-name">GitBranch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;checkout&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">GitCheckout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;clone&quot;</span><span class="token punctuation">,</span>    <span class="token keyword">new</span> <span class="token class-name">GitClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;diff&quot;</span><span class="token punctuation">,</span>     <span class="token keyword">new</span> <span class="token class-name">GitDiff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;merge&quot;</span><span class="token punctuation">,</span>    <span class="token keyword">new</span> <span class="token class-name">GitMerge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;push&quot;</span><span class="token punctuation">,</span>     <span class="token keyword">new</span> <span class="token class-name">GitPush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;rebase&quot;</span><span class="token punctuation">,</span>   <span class="token keyword">new</span> <span class="token class-name">GitRebase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;tag&quot;</span><span class="token punctuation">,</span>      <span class="token keyword">new</span> <span class="token class-name">GitTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>关于自定义类型转换器的注意事项：自定义类型转换器仅注册在自定义类型之前添加的子命令和嵌套子子命令中。为了确保所有子命令都可以使用自定义类型转换器，请在添加子命令后最后注册类型转换器。</p></blockquote> <h4 id="声明方式"><a href="#声明方式" class="header-anchor">#</a> 声明方式</h4> <p>子命令可以声明性地使用<code>@Command</code>注释的子命令属性注册。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;git&quot;</span><span class="token punctuation">,</span> subcommands <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token class-name">GitStatus</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitCommit</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitAdd</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitBranch</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitCheckout</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitClone</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitDiff</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitMerge</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitPush</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitRebase</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name">GitTag</span><span class="token punctuation">.</span><span class="token keyword">class</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Git</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>当构建新的<code>CommandLine（new Git()）</code>实例时，声明的子命令会自动实例化和添加。</p> <p>子命令属性中引用的子命令必须具有带有名称属性的<code>@Command</code>注释，否则从<code>CommandLine</code>构造函数中抛出异常。</p> <h4 id="嵌套子命令"><a href="#嵌套子命令" class="header-anchor">#</a> 嵌套子命令</h4> <p>子命令可以嵌套到任意深度级别。有关详细信息，请参阅用户手册的嵌套子命令部分。</p> <h3 id="解析子命令"><a href="#解析子命令" class="header-anchor">#</a> 解析子命令</h3> <p>对于这个例子，我们假设我们创建了一个别名git来调用我们的Java应用程序。这也可以是一个调用我们Java程序的脚本或函数：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>alias git<span class="token operator">=</span>'java <span class="token class-name"><span class="token namespace">picocli<span class="token punctuation">.</span></span>Demo</span>$<span class="token class-name">Git</span>'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>接下来，我们用以下参数调用我们的命令：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> --git-dir<span class="token operator">=</span>/home/rpopma/picocli status -sb -uno
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中git（实际上是<code>java picocli.Demo$Git</code>）是顶级命令，其次是全局选项和具有自身选项的子命令状态。</p> <p>设置解析器并解析命令行可能如下所示：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Set up the parser</span>
    <span class="token class-name">CommandLine</span> commandLine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Git</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// add subcommands programmatically (not necessary if the parent command</span>
    <span class="token comment">// declaratively registers the subcommands via annotation)</span>
    commandLine<span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span>   <span class="token keyword">new</span> <span class="token class-name">GitStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">addSubcommand</span><span class="token punctuation">(</span><span class="token string">&quot;commit&quot;</span><span class="token punctuation">,</span>   <span class="token keyword">new</span> <span class="token class-name">GitCommit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment">// Invoke the parse method to parse the arguments</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CommandLine</span><span class="token punctuation">&gt;</span></span> parsed <span class="token operator">=</span> commandLine<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">handleParseResult</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>CommandLine.parse</code>方法返回一个包含可识别命令的列表。顶级命令（在本例中由git调用的Java类）始终是返回列表中的第一个元素。</p> <p>返回的列表还包含所有匹配的子命令。您的应用程序需要检查此列表，以查看调用了哪些子命令，并采取适当的行动。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">handleParseResult</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CommandLine</span><span class="token punctuation">&gt;</span></span> parsed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">assert</span> parsed<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">:</span> <span class="token string">&quot;1 command and 1 subcommand found&quot;</span>

    <span class="token keyword">assert</span> parsed<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Git</span><span class="token punctuation">.</span><span class="token keyword">class</span>       <span class="token operator">:</span> <span class="token string">&quot;main command&quot;</span>
    <span class="token keyword">assert</span> parsed<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">GitStatus</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">:</span> <span class="token string">&quot;subcommand&quot;</span>

    <span class="token class-name">Git</span> git <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Git</span><span class="token punctuation">)</span> parsed<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">assert</span> git<span class="token punctuation">.</span>gitDir<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/home/rpopma/picocli&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">GitStatus</span> gitstatus <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">GitStatus</span><span class="token punctuation">)</span> parsed<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">assert</span>  gitstatus<span class="token punctuation">.</span>shortFormat              <span class="token operator">:</span> <span class="token string">&quot;git status -s&quot;</span>
    <span class="token keyword">assert</span>  gitstatus<span class="token punctuation">.</span>branchInfo               <span class="token operator">:</span> <span class="token string">&quot;git status -b&quot;</span>
    <span class="token keyword">assert</span> <span class="token operator">!</span>gitstatus<span class="token punctuation">.</span>showIgnored              <span class="token operator">:</span> <span class="token string">&quot;git status --showIgnored not specified&quot;</span>
    <span class="token keyword">assert</span>  gitstatus<span class="token punctuation">.</span>mode <span class="token operator">==</span> <span class="token class-name">GitStatusMode</span><span class="token punctuation">.</span>no <span class="token operator">:</span> <span class="token string">&quot;git status -u=no&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>从Picocli 4.0开始，您可以使用执行方法来减少应用程序中的错误处理和其他样板代码。</p> <h3 id="parentcommand注解"><a href="#parentcommand注解" class="header-anchor">#</a> <code>@ParentCommand</code>注解</h3> <p>在具有子命令的命令行应用程序中，顶级命令的选项通常用作适用于所有子命令的“全局”选项。<code>@ParentCommand</code>注释使子命令可以轻松访问其父命令选项：用<code>@ParentCommand</code>注释的子命令字段通过引用父命令进行初始化。用户手册有一个示例，展示了如何使用<code>@ParentCommand</code>注释。</p> <h3 id="子命令的使用帮助"><a href="#子命令的使用帮助" class="header-anchor">#</a> 子命令的使用帮助</h3> <p>注册子命令后，调用commandLine.usage方法将显示一条使用帮助消息，按注册顺序包含所有子命令。例如：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Usage: <span class="token function">git</span> <span class="token punctuation">[</span>-hV<span class="token punctuation">]</span> <span class="token punctuation">[</span>--git-dir<span class="token operator">=</span><span class="token operator">&lt;</span>gitDir<span class="token operator">&gt;</span><span class="token punctuation">]</span>
Git is a fast, scalable, distributed revision control system with an unusually
rich <span class="token builtin class-name">command</span> <span class="token builtin class-name">set</span> that provides both high-level operations and full access to
internals.
      --git-dir<span class="token operator">=</span><span class="token operator">&lt;</span>gitDir<span class="token operator">&gt;</span>   Set the path to the repository.
  -h, --help               Show this <span class="token builtin class-name">help</span> message and exit.
  -V, --version            Print version information and exit.

Commands:

The <span class="token function">most</span> commonly used <span class="token function">git</span> commands are:
  <span class="token builtin class-name">help</span>      Displays <span class="token builtin class-name">help</span> information about the specified <span class="token builtin class-name">command</span>
  status    Show the working tree status.
  commit    Record changes to the repository.
  <span class="token function">add</span>       Add <span class="token function">file</span> contents to the index.
  branch    List, create, or delete branches.
  checkout  Checkout a branch or paths to the working tree.
  clone     Clone a repository into a new directory.
  <span class="token function">diff</span>      Show changes between commits, commit and working tree, etc.
  merge     Join two or <span class="token function">more</span> development histories together.
  push      Update remote refs along with associated objects.
  rebase    Forward-port <span class="token builtin class-name">local</span> commits to the updated upstream head.
  tag       Create, list, delete or verify a tag object signed with GPG.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>列表中子命令的描述取自子命令的第一个标题行，或者，如果子命令没有标题注释，则取自描述。</p> <h4 id="隐藏的子命令"><a href="#隐藏的子命令" class="header-anchor">#</a> 隐藏的子命令</h4> <p>将隐藏属性设置为true的命令不会显示在其父命令的使用帮助消息中。有关详细信息，请参阅用户手册的隐藏子命令部分。</p> <h4 id="帮助子命令"><a href="#帮助子命令" class="header-anchor">#</a> 帮助子命令</h4> <p>Picocli有一个内置的帮助子命令，但如果您有兴趣创建自定义帮助命令，请参阅用户手册的帮助子命令部分。</p> <h2 id="重复使用"><a href="#重复使用" class="header-anchor">#</a> 重复使用</h2> <p>您可能会发现自己在许多命令行应用程序中定义了相同的选项、参数或命令属性。为了减少重复，picocli支持子类和混合，作为重用此类选项和属性的方法。</p> <p>重用上述选项和属性的一种方法是扩展类。Picocli将走在类层次结构中检查注释，因此在超类上声明的<code>@Options</code>、<code>@Parameters</code>和<code>@Command</code>属性在所有子类中都可用。</p> <p>命令也可以通过用<code>@Mixin</code>注释字段来包含<code>mixin</code>。mixin类中发现的所有picocli注释都添加到带有<code>@Mixin</code>注释字段的命令中。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;zip&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;Example reuse with @Mixin annotation.&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCommand</span> <span class="token punctuation">{</span>

    <span class="token comment">// adds the options defined in ReusableOptions to this command</span>
    <span class="token annotation punctuation">@Mixin</span>
    <span class="token keyword">private</span> <span class="token class-name">ReusableOptions</span> myMixin<span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>用户手册的重用部分有更广泛的示例。</p> <h2 id="执行命令"><a href="#执行命令" class="header-anchor">#</a> 执行命令</h2> <p>执行命令时，解析命令行是第一步。一个强大的现实世界应用程序需要处理许多场景：</p> <ul><li><p>用户输入无效：显示描述问题的错误，并显示使用帮助</p></li> <li><p>用户请求的使用帮助：显示帮助消息并退出</p></li> <li><p>用户请求的版本帮助：显示版本信息和退出</p></li> <li><p>以上都不是：运行业务逻辑（可能用于子命令）</p></li> <li><p>业务逻辑可能会抛出异常：处理或重新抛出异常</p></li></ul> <p>从Piocli 4.0起，您可以使用<code>Commandline.execute</code>方法，该方法在一行代码中处理上述所有场景：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用执行方法，应用程序代码可以非常紧凑：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;myapp&quot;</span><span class="token punctuation">,</span> mixinStandardHelpOptions <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Option</span><span class="token punctuation">(</span>names <span class="token operator">=</span> <span class="token string">&quot;-x&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> x<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// business logic</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;x=%s%n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">;</span> <span class="token comment">// exit code</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// bootstrap the application</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>尽管只有15行长，但这是一个成熟的应用程序，除了<code>-x</code>选项外，还有<code>--help</code>和<code>--version</code>选项。如果用户要求，执行方法将显示使用帮助或版本信息，无效的用户输入将导致有用的错误消息。如果用户输入有效，则调用业务逻辑。最后，执行方法返回一个退出状态代码，如果需要，可用于调用<code>System.exit</code>。</p> <p>用户手册的DIY命令执行部分显示了执行方法可以省略的样板代码示例。</p> <h3 id="退出代码"><a href="#退出代码" class="header-anchor">#</a> 退出代码</h3> <p>许多命令行应用程序返回退出代码，以表示成功或失败。零通常意味着成功，非零退出代码通常用于错误，但除此之外，每个应用程序的含义不同。</p> <p>Picocli 4.0中引入的CommandLine.execute方法返回一个int，如果需要，应用程序可以使用此返回值调用System.exit。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> exitCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span>exitCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>旧版本的picocli有一些有限的退出代码支持，picocli会调用System.exit，但现在不建议使用。</p></blockquote> <h3 id="生成退出代码"><a href="#生成退出代码" class="header-anchor">#</a> 生成退出代码</h3> <p>实现<code>Callable</code>并且添加了<code>@Command</code>注解的方法和<code>@Command</code>注解的类可以简单地返回int或整数，此值将从<code>CommandLine.execute</code>返回。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;greet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Greet</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// define a &quot;shout&quot; subcommand with a @Command-annotated method</span>
    <span class="token annotation punctuation">@Command</span>
    <span class="token keyword">int</span> <span class="token function">shout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;HI!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">assert</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">assert</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token keyword">new</span> <span class="token class-name">CommandLine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&quot;shout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>使用实现Runnable的用户对象的命令可以实现IExitCodeGenerator接口来生成退出代码。</p> <h3 id="例外退出代码"><a href="#例外退出代码" class="header-anchor">#</a> 例外退出代码</h3> <p>默认情况下，执行方法成功时返回<code>CommandLine.ExitCode.OK (0)</code>，在<code>Runable、Callable</code>或命令方法中发生异常时返回<code>CommandLine.ExitCode.SOFTWARE（1）</code>，以及无效输入的<code>CommandLine.ExitCode.USAGE（2）</code>。（根据这个StackOverflow答案，这些是常见的值）。这可以通过<code>@Command</code>注释进行自定义。例如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Command</span><span class="token punctuation">(</span>exitCodeOnInvalidInput <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">,</span>
   exitCodeOnExecutionException <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>此外，应用程序可以配置<code>IExitCodeExceptionMapper</code>将特定异常映射到退出代码。</p> <h3 id="执行配置"><a href="#执行配置" class="header-anchor">#</a> 执行配置</h3> <p>虽然执行方法允许在一行代码中运行CLI应用程序，但命令执行的各个步骤都是高度可配置的。以下方法可用于配置执行方法的行为，您可以使用它们来调整命令执行以满足您的需求：</p> <ul><li>get/setOut</li> <li>get/setErr</li> <li>get/setColorScheme</li> <li>get/setExecutionStrategy</li> <li>get/setParameterExceptionHandler</li> <li>get/setExecutionExceptionHandler</li> <li>get/setExitCodeExceptionMapper</li></ul> <blockquote><p>上述方法不适用于（并被忽略）其他入口点，如parse、parseArgs、populateCommand、run、call、调用、parseWithHandler和parseWithHandlers。</p></blockquote> <h3 id="处理错误"><a href="#处理错误" class="header-anchor">#</a> 处理错误</h3> <p>在内部，执行方法解析指定的用户输入，并填充注释定义的选项和位置参数。当用户指定无效输入时，由<code>IParameterExceptionHandler</code>处理。</p> <p>解析用户输入后，将调用命令的业务逻辑：运行、调用或<code>@Command</code>-annotated方法。当业务逻辑抛出异常时，由<code>IExecutionExceptionHandler</code>处理。</p> <p>在大多数情况下，默认处理程序就足够了。在用户手册的处理错误部分深入解释了默认处理程序的自定义。</p> <h3 id="迁移"><a href="#迁移" class="header-anchor">#</a> 迁移</h3> <p>旧版本的picocli支持运行、调用、调用和parseWithHandlers方便方法，这些方法类似于执行，但对解析器配置的支持有限，对退出代码的支持有限。从picocli 4.0中，这些方法已被弃用。</p> <p>用户手册的迁移部分可帮助您将现有代码迁移到新引入的执行API</p> <h2 id="追踪"><a href="#追踪" class="header-anchor">#</a> 追踪</h2> <p>Picocli支持解析器跟踪，以方便故障排除。系统属性picocli.trace控制跟踪级别。支持的级别包括OFF、WARN、INFO和DEBUG。默认跟踪级别为WARN。</p> <p>指定没有值的系统属性-Dpicocli.trace将把跟踪级别设置为INFO。</p> <ul><li><p>DEBUG：显示解析器在命令行解析期间所作决定的详细信息。</p></li> <li><p>INFO：显示命令行解析期间发生的事情的高级概述。</p></li> <li><p>WARN：默认值。启用宽松解析时显示警告而不是错误：当多次指定单值选项（CommandLine.overwrittenOptionsAllowed为真）或命令行参数无法匹配为选项或位置参数时（CommandLine.unmatchedArgumentsAllowed为真）。</p></li> <li><p>OFF：禁止所有跟踪，包括警告。</p></li></ul> <p>示例：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code># create a custom <span class="token char">'mygit'</span> command that invokes <span class="token class-name"><span class="token namespace">picocli<span class="token punctuation">.</span></span>Demo</span>$<span class="token class-name">Git</span> <span class="token keyword">with</span> <span class="token namespace">tracing</span> switched on
alias mygit<span class="token operator">=</span>'java <span class="token operator">-</span><span class="token class-name">Dpicocli</span><span class="token punctuation">.</span>trace <span class="token operator">-</span>cp picocli<span class="token operator">-</span>all<span class="token punctuation">.</span>jar <span class="token class-name"><span class="token namespace">picocli<span class="token punctuation">.</span></span>Demo</span>$<span class="token class-name">Git</span>'

# invoke our command <span class="token keyword">with</span> <span class="token namespace">some</span> parameters
mygit <span class="token operator">--</span>git<span class="token operator">-</span>dir<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>rpopma<span class="token operator">/</span>picocli commit <span class="token operator">-</span>m <span class="token string">&quot;Fixed typos&quot;</span> <span class="token operator">--</span> src1<span class="token punctuation">.</span>java src2<span class="token punctuation">.</span>java src3<span class="token punctuation">.</span>java
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>输出：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>[picocli INFO] Parsing 8 command line args [--git-dir=/home/rpopma/picocli, commit, -m, &quot;Fixed typos&quot;, --, src1.java, src2.java, src3.java]
[picocli INFO] Setting File field 'Git.gitDir' to '\home\rpopma\picocli' for option --git-dir
[picocli INFO] Adding [Fixed typos] to List&amp;lt;String&gt; field 'GitCommit.message' for option -m
[picocli INFO] Found end-of-options delimiter '--'. Treating remainder as positional parameters.
[picocli INFO] Adding [src1.java] to List&amp;lt;String&gt; field 'GitCommit.files' for args[0..*]
[picocli INFO] Adding [src2.java] to List&amp;lt;String&gt; field 'GitCommit.files' for args[0..*]
[picocli INFO] Adding [src3.java] to List&amp;lt;String&gt; field 'GitCommit.files' for args[0..*]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="自动补全"><a href="#自动补全" class="header-anchor">#</a> 自动补全</h2> <p>基于Picocli的应用程序现在可以在Bash或Zsh Unix shell中完成命令行。请参阅Java命令行应用程序自动完成手册，了解如何生成为您的应用程序量身定制的自动完成脚本。</p> <h2 id="更多"><a href="#更多" class="header-anchor">#</a> 更多</h2> <p>为了保持本快速指南简短（或至少简短），必须遗漏一些东西。如果您感兴趣，这里有一些快速链接：</p> <ul><li><a href="https://picocli.info/#_picocli_in_other_languages" target="_blank" rel="noopener noreferrer">Picocli in Other Languages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://picocli.info/#_usage_help_api" target="_blank" rel="noopener noreferrer">Usage Help API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for customizing the usage help message layout</li> <li><a href="https://picocli.info/#_tips_tricks" target="_blank" rel="noopener noreferrer">Tips &amp; Tricks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://remkop.github.io/picocli/apidocs" target="_blank" rel="noopener noreferrer">API Javadoc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div>  <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Java" title="标签">#Java</a><a href="/tags/?tag=CLI" title="标签">#CLI</a><a href="/tags/?tag=Tools" title="标签">#Tools</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/04/25, 19:19:43</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/sec/skill/jar2app/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Jar打包为APP</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/sec/skill/jar2app/" class="prev">Jar打包为APP</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/sec/vuln/deserialization/serialization/"><div>
            反序列化漏洞原理 - 反序列化
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">05-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/more/blog/privatepage/"><div>
            私密文章测试
            <!----></div></a> <span class="date">05-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/dev/basic/ds/list/"><div>
            【数据结构】线性表
            <!----></div></a> <span class="date">05-06</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:p0josec@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/p0josec" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>Vuepress-theme-Vdoing | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/assets/js/app.cc096181.js" defer></script><script src="/assets/js/2.5dee0ed7.js" defer></script><script src="/assets/js/59.17316a40.js" defer></script>
  </body>
</html>
